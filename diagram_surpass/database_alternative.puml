@startuml Data_Structure
!define Table(name,desc) class name as "desc" << (T,#FFAAAA) >>
!define primary_key(x) <b><u>x</u></b>
!define foreign_key(x) <i>#x#</i>

skinparam class {
    BackgroundColor PaleGreen
    BorderColor DarkGreen
    ArrowColor DarkSlate
}

title Islamic Travel Service - Data Structure Schema

Table(TravelPrograms, "travel_programs") {
    primary_key(program_id): CHAR(8)
    program_type: ENUM
    currency_code: CHAR(3)
    title: VARCHAR(255)
    departure_date: DATE
    quad_room_rate: DECIMAL
    triple_room_rate: DECIMAL
    double_room_rate: DECIMAL
    medinah_lodging: VARCHAR(100)
    makkah_lodging: VARCHAR(100)
    additional_stays: VARCHAR(100)
    room_inventory: JSON
    service_code: VARCHAR(50)
    valid_from: TIMESTAMP
    valid_until: TIMESTAMP
}

Table(Participants, "participants") {
    primary_key(identity_number): VARCHAR(16)
    legal_name: VARCHAR(100)
    birth_place: VARCHAR(50)
    birth_date: DATE
    gender: ENUM
    residential_address: TEXT
    postal_code: CHAR(5)
    contact_email: VARCHAR(100)
    contact_phone: VARCHAR(20)
    foreign_key(program_id): CHAR(8)
    accommodation_type: ENUM
    payment_verification: ENUM
    total_paid: DECIMAL
    outstanding_balance: DECIMAL
    registration_date: TIMESTAMP
    last_update: TIMESTAMP
}

Table(Transactions, "transactions") {
    primary_key(transaction_code): CHAR(10)
    foreign_key(program_id): CHAR(8)
    foreign_key(identity_number): VARCHAR(16)
    participant_name: VARCHAR(100)
    correspondence_address: TEXT
    contact_number: VARCHAR(20)
    notes: TEXT
    installment_type: ENUM
    selected_program: VARCHAR(255)
    room_preference: ENUM
    package_cost: DECIMAL
    paid_amount: DECIMAL
    discount_applied: DECIMAL
    payment_timestamp: TIMESTAMP
}

Table(Withdrawals, "withdrawals") {
    primary_key(withdrawal_id): INT
    foreign_key(identity_number): VARCHAR(16)
    withdrawal_reason: TEXT
    current_status: ENUM
    receipt_document: VARCHAR(255)
    supporting_document: VARCHAR(255)
    submission_date: TIMESTAMP
    processing_date: TIMESTAMP
}

Participants }-- TravelPrograms : registers
Transactions }-- TravelPrograms : references
Transactions }-- Participants : belongs to
Withdrawals }-- Participants : requested by

@enduml
